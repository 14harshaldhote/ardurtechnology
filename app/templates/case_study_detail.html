{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="page-header">
    <div class="container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" data-aos="fade-down">
            <a href="{{ url_for('home') }}">Home</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <a href="{{ url_for('case_studies') }}">Case Studies</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <span class="text-white">{{ case_study.title }}</span>
        </nav>

        <!-- Category Badge -->
        <div class="mb-4" data-aos="fade-up">
            <span class="badge bg-primary text-white">
                <i class="fas fa-tag mr-2"></i>
                {{ case_study.category }}
            </span>
        </div>

        <!-- Title -->
        <h1 class="page-title" data-aos="fade-up" data-aos-delay="100">
            {{ case_study.title }}
        </h1>

        <!-- Subtitle -->
        <p class="page-subtitle" data-aos="fade-up" data-aos-delay="200">
            {{ case_study.subtitle }}
        </p>

        <!-- Meta Info -->
        <div class="flex flex-wrap items-center gap-6 text-gray-300 mt-6" data-aos="fade-up" data-aos-delay="300">
            <div class="flex items-center gap-2">
                <i class="fas fa-building text-primary"></i>
                <span>{{ case_study.client }}</span>
            </div>
            <div class="flex items-center gap-2">
                <i class="fas fa-map-pin text-primary"></i>
                <span>{{ case_study.location }}</span>
            </div>
            <div class="flex items-center gap-2">
                <i class="fas fa-clock text-primary"></i>
                <span>{{ case_study.duration }}</span>
            </div>
            <div class="flex items-center gap-2">
                <i class="fas fa-trending-up text-secondary"></i>
                <span>{{ case_study.improvement }}% Improvement</span>
            </div>
        </div>
    </div>
</section>

<!-- Case Study Content -->
<section class="section bg-white">
    <div class="container max-w-6xl">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-3">
                <!-- Overview -->
                <div class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-display font-bold text-gray-900 mb-6">Project Overview</h2>
                    <p class="text-gray-700 leading-relaxed mb-6">{{ case_study.overview }}</p>
                    
                    <!-- Key Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        {% for metric in case_study.key_metrics %}
                        <div class="text-center p-6 bg-gray-50 rounded-lg">
                            <div class="text-3xl font-bold text-primary mb-2">{{ metric.value }}</div>
                            <div class="text-sm text-gray-600">{{ metric.label }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Challenge -->
                <div class="mb-12" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mr-4">
                            <i data-lucide="alert-circle" class="w-6 h-6 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-display font-bold text-gray-900">The Challenge</h2>
                    </div>
                    <p class="text-gray-700 leading-relaxed mb-6">{{ case_study.challenge }}</p>
                    
                    {% if case_study.challenge_points %}
                    <div class="bg-red-50 border-l-4 border-red-400 p-6 rounded-r-lg">
                        <h4 class="font-semibold text-gray-900 mb-4">Key Challenges:</h4>
                        <ul class="space-y-2">
                            {% for point in case_study.challenge_points %}
                            <li class="flex items-start">
                                <i data-lucide="x-circle" class="w-5 h-5 text-red-500 mr-3 mt-0.5"></i>
                                <span class="text-gray-700">{{ point }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>

                <!-- Solution -->
                <div class="mb-12" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-primary rounded-lg flex items-center justify-center mr-4">
                            <i data-lucide="lightbulb" class="w-6 h-6 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-display font-bold text-gray-900">Our Solution</h2>
                    </div>
                    <p class="text-gray-700 leading-relaxed mb-6">{{ case_study.solution }}</p>
                    
                    {% if case_study.solution_steps %}
                    <div class="space-y-6">
                        {% for step in case_study.solution_steps %}
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center mr-4 mt-1">
                                <span class="text-white font-semibold text-sm">{{ loop.index }}</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">{{ step.title }}</h4>
                                <p class="text-gray-700">{{ step.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <!-- Implementation -->
                {% if case_study.implementation %}
                <div class="mb-12" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mr-4">
                            <i data-lucide="settings" class="w-6 h-6 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-display font-bold text-gray-900">Implementation Process</h2>
                    </div>
                    <p class="text-gray-700 leading-relaxed mb-6">{{ case_study.implementation }}</p>
                    
                    {% if case_study.timeline %}
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-4">Project Timeline:</h4>
                        <div class="space-y-4">
                            {% for phase in case_study.timeline %}
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-primary rounded-full mr-4"></div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium text-gray-900">{{ phase.phase }}</span>
                                        <span class="text-sm text-gray-600">{{ phase.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Results -->
                <div class="mb-12" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mr-4">
                            <i data-lucide="trending-up" class="w-6 h-6 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-display font-bold text-gray-900">Results & Impact</h2>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        {% for result in case_study.results %}
                        <div class="result-item">
                            <div class="result-metric">{{ result.metric }}</div>
                            <div class="result-description">{{ result.description }}</div>
                        </div>
                        {% endfor %}
                    </div>

                    {% if case_study.benefits %}
                    <div class="bg-green-50 border-l-4 border-green-400 p-6 rounded-r-lg">
                        <h4 class="font-semibold text-gray-900 mb-4">Key Benefits Achieved:</h4>
                        <ul class="space-y-2">
                            {% for benefit in case_study.benefits %}
                            <li class="flex items-start">
                                <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-0.5"></i>
                                <span class="text-gray-700">{{ benefit }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>

                <!-- Technologies Used -->
                {% if case_study.technologies %}
                <div class="mb-12" data-aos="fade-up">
                    <h3 class="text-xl font-semibold text-gray-900 mb-6">Technologies & Tools Used</h3>
                    <div class="flex flex-wrap gap-3">
                        {% for tech in case_study.technologies %}
                        <span class="badge bg-gray-100 text-gray-700">{{ tech }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Client Testimonial -->
                {% if case_study.testimonial %}
                <div class="bg-primary-50 p-8 rounded-lg" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center mr-4">
                            <i data-lucide="quote" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900">Client Testimonial</h3>
                    </div>
                    <blockquote class="text-gray-700 italic text-lg leading-relaxed mb-6">
                        "{{ case_study.testimonial.quote }}"
                    </blockquote>
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center mr-4">
                            <span class="text-white font-semibold">{{ case_study.testimonial.author[0] }}</span>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-900">{{ case_study.testimonial.author }}</div>
                            <div class="text-sm text-gray-600">{{ case_study.testimonial.position }}</div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="sticky top-8 space-y-6">
                    <!-- Project Details -->
                    <div class="card card-content" data-aos="fade-up">
                        <h4 class="font-semibold text-gray-900 mb-4">Project Details</h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Industry:</span>
                                <span class="font-medium">{{ case_study.industry }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Client Size:</span>
                                <span class="font-medium">{{ case_study.client_size }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Project Type:</span>
                                <span class="font-medium">{{ case_study.project_type }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Duration:</span>
                                <span class="font-medium">{{ case_study.duration }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Team Size:</span>
                                <span class="font-medium">{{ case_study.team_size }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Services Used -->
                    <div class="card card-content" data-aos="fade-up">
                        <h4 class="font-semibold text-gray-900 mb-4">Services Provided</h4>
                        <div class="space-y-2">
                            {% for service in case_study.services %}
                            <div class="flex items-center">
                                <i data-lucide="check" class="w-4 h-4 text-primary mr-3"></i>
                                <span class="text-sm text-gray-700">{{ service }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Contact CTA -->
                    <div class="card card-content bg-primary-50" data-aos="fade-up">
                        <h4 class="font-semibold text-gray-900 mb-4">Interested in Similar Results?</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            Let's discuss how we can help you achieve similar outcomes for your business.
                        </p>
                        <a href="{{ url_for('contact') }}" class="btn btn-primary w-full">
                            <i data-lucide="phone" class="w-4 h-4 mr-2"></i>
                            Contact Us
                        </a>
                    </div>

                    <!-- Download Case Study -->
                    {% if case_study.pdf_url %}
                    <div class="card card-content" data-aos="fade-up">
                        <h4 class="font-semibold text-gray-900 mb-4">Download PDF</h4>
                        <p class="text-sm text-gray-600 mb-4">
                            Get the complete case study as a PDF document.
                        </p>
                        <a href="{{ case_study.pdf_url }}" class="btn btn-outline w-full" target="_blank">
                            <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                            Download PDF
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Case Studies -->
<section class="section bg-gray-50">
    <div class="container">
        <div class="text-center mb-8">
            <h2 class="section-title">Related Case Studies</h2>
            <p class="section-subtitle">
                Explore more success stories from similar industries and challenges.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for related_case in related_cases[:3] %}
            <div class="card card-content" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                <div class="h-48 bg-gradient-primary rounded-lg mb-4 relative overflow-hidden">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i data-lucide="trending-up" class="w-16 h-16 text-white opacity-20"></i>
                    </div>
                    <div class="absolute top-4 left-4">
                        <span class="badge bg-white text-primary">{{ related_case.category }}</span>
                    </div>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-3">
                    <a href="{{ url_for('case_study_detail', study_slug=related_case.slug) }}" class="hover:text-primary">
                        {{ related_case.title }}
                    </a>
                </h3>
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ related_case.subtitle }}</p>
                <div class="flex items-center justify-between text-xs text-gray-500">
                    <span>{{ related_case.industry }}</span>
                    <span class="text-primary font-medium">{{ related_case.improvement }}% improvement</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-8">
            <a href="{{ url_for('case_studies') }}" class="btn btn-outline">
                View All Case Studies
                <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i>
            </a>
        </div>
    </div>
</section>
{% endblock %}
