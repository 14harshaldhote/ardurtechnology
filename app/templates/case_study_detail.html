{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="page-header">
    <div class="container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" data-aos="fade-down">
            <a href="{{ url_for('home') }}">Home</a>
            <i class="fas fa-chevron-right" style="font-size: 0.75rem;"></i>
            <a href="{{ url_for('case_studies') }}">Case Studies</a>
            <i class="fas fa-chevron-right" style="font-size: 0.75rem;"></i>
            <span style="color: white;">{{ case_study.title }}</span>
        </nav>

        <!-- Category Badge -->
        <div style="margin-bottom: 1.5rem;" data-aos="fade-up">
            <span class="badge" style="background: var(--primary-600); color: white;">
                <i class="fas fa-tag" style="margin-right: 0.5rem;"></i>
                {{ case_study.category }}
            </span>
        </div>

        <!-- Title -->
        <h1 class="page-title" data-aos="fade-up" data-aos-delay="100">
            {{ case_study.title }}
        </h1>

        <!-- Subtitle -->
        <p class="page-subtitle" data-aos="fade-up" data-aos-delay="200">
            {{ case_study.subtitle }}
        </p>

        <!-- Meta Info -->
        <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 2rem; color: var(--gray-300); margin-top: 2rem;" data-aos="fade-up" data-aos-delay="300">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-building text-primary"></i>
                <span>{{ case_study.client }}</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-map-pin text-primary"></i>
                <span>{{ case_study.location }}</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-clock text-primary"></i>
                <span>{{ case_study.duration }}</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-trending-up text-secondary"></i>
                <span>{{ case_study.improvement }}% Improvement</span>
            </div>
        </div>
    </div>
</section>

<!-- Case Study Content -->
<section class="section bg-white">
    <div class="container" style="max-width: 80rem;">
        <div class="horizontal-layout" style="grid-template-columns: 3fr 1fr;">
            <!-- Main Content -->
            <div>
                <!-- Overview -->
                <div style="margin-bottom: 4rem;" data-aos="fade-up">
                    <h2 class="font-display" style="font-size: 1.875rem; font-weight: 700; color: var(--gray-900); margin-bottom: 2rem;">Project Overview</h2>
                    <p style="color: var(--gray-700); line-height: 1.6; margin-bottom: 2rem;">{{ case_study.overview }}</p>
                    
                    <!-- Key Metrics -->
                    <div class="feature-grid" style="margin-bottom: 3rem;">
                        {% for metric in case_study.key_metrics %}
                        <div class="text-center" style="padding: 2rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary-600); margin-bottom: 0.75rem;">{{ metric.value }}</div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">{{ metric.label }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Challenge -->
                <div style="margin-bottom: 4rem;" data-aos="fade-up">
                    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
                        <div class="service-icon secondary" style="margin-right: 1.5rem;">
                            <i data-lucide="alert-circle"></i>
                        </div>
                        <h2 class="font-display" style="font-size: 1.875rem; font-weight: 700; color: var(--gray-900);">The Challenge</h2>
                    </div>
                    <p style="color: var(--gray-700); line-height: 1.6; margin-bottom: 2rem;">{{ case_study.challenge }}</p>
                    
                    {% if case_study.challenge_points %}
                    <div style="background: var(--red-50); border-left: 4px solid var(--red-400); padding: 2rem; border-radius: 0 var(--radius-lg) var(--radius-lg) 0;">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Key Challenges:</h4>
                        <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
                            {% for point in case_study.challenge_points %}
                            <li style="display: flex; align-items: flex-start;">
                                <i data-lucide="x-circle" style="width: 1.25rem; height: 1.25rem; color: var(--red-500); margin-right: 1rem; margin-top: 0.125rem; flex-shrink: 0;"></i>
                                <span style="color: var(--gray-700);">{{ point }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>

                <!-- Solution -->
                <div style="margin-bottom: 4rem;" data-aos="fade-up">
                    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
                        <div class="service-icon" style="margin-right: 1.5rem;">
                            <i data-lucide="lightbulb"></i>
                        </div>
                        <h2 class="font-display" style="font-size: 1.875rem; font-weight: 700; color: var(--gray-900);">Our Solution</h2>
                    </div>
                    <p style="color: var(--gray-700); line-height: 1.6; margin-bottom: 2rem;">{{ case_study.solution }}</p>
                    
                    {% if case_study.solution_steps %}
                    <div style="display: flex; flex-direction: column; gap: 2rem;">
                        {% for step in case_study.solution_steps %}
                        <div style="display: flex; align-items: flex-start;">
                            <div style="width: 2rem; height: 2rem; background: var(--primary-600); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1.5rem; margin-top: 0.25rem; flex-shrink: 0;">
                                <span style="color: white; font-weight: 600; font-size: 0.875rem;">{{ loop.index }}</span>
                            </div>
                            <div>
                                <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 0.75rem;">{{ step.title }}</h4>
                                <p style="color: var(--gray-700);">{{ step.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <!-- Implementation -->
                {% if case_study.implementation %}
                <div class="mb-12" data-aos="fade-up">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mr-4">
                            <i data-lucide="settings" class="w-6 h-6 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-display font-bold text-gray-900">Implementation Process</h2>
                    </div>
                    <p class="text-gray-700 leading-relaxed mb-6">{{ case_study.implementation }}</p>
                    
                    {% if case_study.timeline %}
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-4">Project Timeline:</h4>
                        <div class="space-y-4">
                            {% for phase in case_study.timeline %}
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-primary rounded-full mr-4"></div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium text-gray-900">{{ phase.phase }}</span>
                                        <span class="text-sm text-gray-600">{{ phase.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Results -->
                <div style="margin-bottom: 4rem;" data-aos="fade-up">
                    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
                        <div class="service-icon secondary" style="margin-right: 1.5rem;">
                            <i data-lucide="trending-up"></i>
                        </div>
                        <h2 class="font-display" style="font-size: 1.875rem; font-weight: 700; color: var(--gray-900);">Results & Impact</h2>
                    </div>
                    
                    <div class="results-grid" style="margin-bottom: 3rem;">
                        {% for result in case_study.results %}
                        <div class="result-item">
                            <div class="result-metric">{{ result.metric }}</div>
                            <div class="result-description">{{ result.description }}</div>
                        </div>
                        {% endfor %}
                    </div>

                    {% if case_study.benefits %}
                    <div style="background: var(--green-50); border-left: 4px solid var(--green-400); padding: 2rem; border-radius: 0 var(--radius-lg) var(--radius-lg) 0;">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Key Benefits Achieved:</h4>
                        <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
                            {% for benefit in case_study.benefits %}
                            <li style="display: flex; align-items: flex-start;">
                                <i data-lucide="check-circle" style="width: 1.25rem; height: 1.25rem; color: var(--green-500); margin-right: 1rem; margin-top: 0.125rem; flex-shrink: 0;"></i>
                                <span style="color: var(--gray-700);">{{ benefit }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>

                <!-- Technologies Used -->
                {% if case_study.technologies %}
                <div style="margin-bottom: 4rem;" data-aos="fade-up">
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--gray-900); margin-bottom: 2rem;">Technologies & Tools Used</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
                        {% for tech in case_study.technologies %}
                        <span class="badge" style="background: var(--gray-100); color: var(--gray-700);">{{ tech }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Client Testimonial -->
                {% if case_study.testimonial %}
                <div class="modern-card" style="background: var(--primary-50); padding: 3rem;" data-aos="fade-up">
                    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
                        <div class="service-icon" style="margin-right: 1.5rem;">
                            <i data-lucide="quote"></i>
                        </div>
                        <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--gray-900);">Client Testimonial</h3>
                    </div>
                    <blockquote style="color: var(--gray-700); font-style: italic; font-size: 1.125rem; line-height: 1.6; margin-bottom: 2rem;">
                        "{{ case_study.testimonial.quote }}"
                    </blockquote>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 3rem; height: 3rem; background: var(--primary-600); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1.5rem;">
                            <span style="color: white; font-weight: 600;">{{ case_study.testimonial.author[0] }}</span>
                        </div>
                        <div>
                            <div style="font-weight: 600; color: var(--gray-900);">{{ case_study.testimonial.author }}</div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">{{ case_study.testimonial.position }}</div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div>
                <div style="position: sticky; top: 2rem; display: flex; flex-direction: column; gap: 2rem;">
                    <!-- Project Details -->
                    <div class="modern-card" data-aos="fade-up">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Project Details</h4>
                        <div style="display: flex; flex-direction: column; gap: 1rem; font-size: 0.875rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray-600);">Industry:</span>
                                <span style="font-weight: 500;">{{ case_study.industry }}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray-600);">Client Size:</span>
                                <span style="font-weight: 500;">{{ case_study.client_size }}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray-600);">Project Type:</span>
                                <span style="font-weight: 500;">{{ case_study.project_type }}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray-600);">Duration:</span>
                                <span style="font-weight: 500;">{{ case_study.duration }}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--gray-600);">Team Size:</span>
                                <span style="font-weight: 500;">{{ case_study.team_size }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Services Used -->
                    <div class="modern-card" data-aos="fade-up">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Services Provided</h4>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            {% for service in case_study.services %}
                            <div style="display: flex; align-items: center;">
                                <i data-lucide="check" class="text-primary" style="width: 1rem; height: 1rem; margin-right: 1rem;"></i>
                                <span style="font-size: 0.875rem; color: var(--gray-700);">{{ service }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Contact CTA -->
                    <div class="modern-card" style="background: var(--primary-50);" data-aos="fade-up">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Interested in Similar Results?</h4>
                        <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1.5rem;">
                            Let's discuss how we can help you achieve similar outcomes for your business.
                        </p>
                        <a href="{{ url_for('contact') }}" class="btn btn-primary btn-full">
                            <i data-lucide="phone"></i>
                            Contact Us
                        </a>
                    </div>

                    <!-- Download Case Study -->
                    {% if case_study.pdf_url %}
                    <div class="modern-card" data-aos="fade-up">
                        <h4 style="font-weight: 600; color: var(--gray-900); margin-bottom: 1.5rem;">Download PDF</h4>
                        <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1.5rem;">
                            Get the complete case study as a PDF document.
                        </p>
                        <a href="{{ case_study.pdf_url }}" class="btn btn-outline btn-full" target="_blank">
                            <i data-lucide="download"></i>
                            Download PDF
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Case Studies -->
<section class="section bg-gray-50">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Related Case Studies</h2>
            <p class="section-subtitle">
                Explore more success stories from similar industries and challenges.
            </p>
        </div>

        <div class="feature-grid">
            {% for related_case in related_cases[:3] %}
            <div class="modern-card" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                <div style="height: 12rem; background: var(--gradient-primary); border-radius: var(--radius-lg); margin-bottom: 1.5rem; position: relative; overflow: hidden;">
                    <div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;">
                        <i data-lucide="trending-up" style="width: 4rem; height: 4rem; color: white; opacity: 0.2;"></i>
                    </div>
                    <div style="position: absolute; top: 1.5rem; left: 1.5rem;">
                        <span class="badge" style="background: white; color: var(--primary-600);">{{ related_case.category }}</span>
                    </div>
                </div>
                <h3 style="font-size: 1.125rem; font-weight: 600; color: var(--gray-900); margin-bottom: 1rem;">
                    <a href="{{ url_for('case_study_detail', study_slug=related_case.slug) }}" style="transition: color var(--transition-normal);" onmouseover="this.style.color='var(--primary-600)'" onmouseout="this.style.color='var(--gray-900)'">
                        {{ related_case.title }}
                    </a>
                </h3>
                <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1.5rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">{{ related_case.subtitle }}</p>
                <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.75rem; color: var(--gray-500);">
                    <span>{{ related_case.industry }}</span>
                    <span class="text-primary font-medium">{{ related_case.improvement }}% improvement</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center" style="margin-top: 3rem;">
            <a href="{{ url_for('case_studies') }}" class="btn btn-outline">
                View All Case Studies
                <i data-lucide="arrow-right"></i>
            </a>
        </div>
    </div>
</section>
{% endblock %}
